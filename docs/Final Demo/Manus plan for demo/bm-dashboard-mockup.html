<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=1280">
<title>BléSaf Demo — Tableau de Bord Directeur d'Agence</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
<style>
/* ===== RESET & BASE ===== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
  background: #F9FAFB;
  color: #1A1A1A;
  min-width: 1200px;
  -webkit-font-smoothing: antialiased;
}

/* ===== TIME-STEP NAVIGATION BAR ===== */
.nav-bar {
  background: #1A1A1A;
  color: #fff;
  padding: 0 32px;
  display: flex;
  align-items: center;
  gap: 16px;
  height: 56px;
  position: sticky;
  top: 0;
  z-index: 1000;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}
.nav-brand {
  font-size: 18px;
  font-weight: 800;
  letter-spacing: -0.5px;
  margin-right: 8px;
  flex-shrink: 0;
}
.nav-brand span { color: #E9041E; }
.nav-sep {
  width: 1px;
  height: 24px;
  background: #374151;
  margin: 0 8px;
  flex-shrink: 0;
}
.nav-title {
  font-size: 13px;
  font-weight: 500;
  color: #9CA3AF;
  flex-shrink: 0;
  margin-right: auto;
}
.nav-buttons {
  display: flex;
  gap: 6px;
  align-items: center;
}
.nav-btn {
  padding: 6px 14px;
  border-radius: 6px;
  border: 1.5px solid #374151;
  background: transparent;
  color: #9CA3AF;
  font-family: 'Inter', sans-serif;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 6px;
}
.nav-btn:hover { border-color: #E9041E; color: #fff; }
.nav-btn.active {
  background: #E9041E;
  border-color: #E9041E;
  color: #fff;
}
.nav-label {
  font-size: 12px;
  font-weight: 600;
  color: #6B7280;
  background: #374151;
  padding: 4px 10px;
  border-radius: 12px;
  margin-left: 8px;
  white-space: nowrap;
}
.nav-hint {
  font-size: 11px;
  color: #6B7280;
  margin-left: 4px;
  flex-shrink: 0;
}
.demo-badge {
  background: #E9041E;
  color: #fff;
  font-size: 10px;
  font-weight: 800;
  padding: 3px 10px;
  border-radius: 4px;
  letter-spacing: 1px;
  text-transform: uppercase;
  margin-left: 8px;
  flex-shrink: 0;
}

/* ===== ALERT BANNER ===== */
.alert-banner {
  padding: 12px 32px;
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 14px;
  font-weight: 600;
  transform: translateY(-100%);
  opacity: 0;
  max-height: 0;
  overflow: hidden;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}
.alert-banner.visible {
  transform: translateY(0);
  opacity: 1;
  max-height: 60px;
  overflow: visible;
}
.alert-banner.critical {
  background: #FEE2E2;
  color: #DC2626;
  border-bottom: 2px solid #FECACA;
}
.alert-banner.success {
  background: #D1FAE5;
  color: #059669;
  border-bottom: 2px solid #A7F3D0;
}
.alert-banner.warning {
  background: #FEF3C7;
  color: #D97706;
  border-bottom: 2px solid #FDE68A;
}
.alert-banner .material-symbols-outlined { font-size: 20px; }
.alert-text { flex: 1; }
.alert-dismiss {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 18px;
  opacity: 0.6;
  color: inherit;
  padding: 4px;
  line-height: 1;
}
.alert-dismiss:hover { opacity: 1; }

/* Flash animation for dramatic transitions */
@keyframes alertFlash {
  0% { opacity: 1; }
  15% { opacity: 0.3; }
  30% { opacity: 1; }
  45% { opacity: 0.3; }
  60% { opacity: 1; }
}
.alert-banner.flash {
  animation: alertFlash 1.2s ease;
}

/* ===== PAGE CONTAINER ===== */
.page {
  padding: 24px 32px 48px;
  max-width: 1600px;
  margin: 0 auto;
}

/* ===== PAGE HEADER ===== */
.page-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 20px;
}
.page-header-left {
  display: flex;
  align-items: center;
  gap: 16px;
}
.page-header-accent {
  width: 4px;
  height: 40px;
  background: #E9041E;
  border-radius: 2px;
  flex-shrink: 0;
}
.page-header-text h2 {
  font-size: 22px;
  font-weight: 700;
  color: #1A1A1A;
}
.page-header-text .subtitle {
  font-size: 13px;
  font-weight: 500;
  color: #6B7280;
  margin-top: 2px;
}
.page-header-right {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 13px;
  color: #6B7280;
}
.page-header-right .branch-badge {
  font-size: 12px;
  font-weight: 600;
  color: #6B7280;
  background: #F3F4F6;
  padding: 4px 12px;
  border-radius: 20px;
  border: 1px solid #E5E7EB;
}
.live-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #10B981;
  animation: pulse-dot 2s infinite;
}
@keyframes pulse-dot {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(1.3); }
}

/* ===== TIER 1: GAUGE + KPIs ===== */
.tier-1 {
  display: flex;
  gap: 20px;
  margin-bottom: 20px;
  align-items: stretch;
}

/* Health Gauge Card */
.gauge-card {
  background: white;
  border-radius: 12px;
  border: 1px solid #E5E7EB;
  padding: 20px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  width: 250px;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: relative;
  overflow: hidden;
  transition: border-color 0.4s ease;
}
.gauge-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  transition: background 0.6s ease;
}
.gauge-card.green { border-color: #BBF7D0; }
.gauge-card.green::before { background: #10B981; }
.gauge-card.amber { border-color: #FDE68A; }
.gauge-card.amber::before { background: #F59E0B; }
.gauge-card.red { border-color: #FECACA; }
.gauge-card.red::before { background: #EF4444; }
.gauge-title {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  color: #9CA3AF;
  margin-bottom: 8px;
}
.gauge-svg-wrap {
  position: relative;
  width: 200px;
  height: 120px;
  margin-bottom: 4px;
}
.gauge-svg-wrap svg {
  width: 200px;
  height: 120px;
}
.gauge-score {
  position: absolute;
  bottom: 18px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 42px;
  font-weight: 800;
  line-height: 1;
  transition: color 0.6s ease;
}
.gauge-sublabel {
  font-size: 10px;
  font-weight: 600;
  color: #9CA3AF;
  position: absolute;
  bottom: 6px;
  left: 50%;
  transform: translateX(-50%);
}
.gauge-status {
  font-size: 14px;
  font-weight: 700;
  margin-top: 4px;
  transition: color 0.6s ease;
}

/* KPI Strip */
.kpi-strip {
  flex: 1;
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 12px;
}
.kpi-card {
  background: white;
  border-radius: 12px;
  border: 1px solid #E5E7EB;
  padding: 16px 14px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
  position: relative;
  overflow: hidden;
}
.kpi-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: #E5E7EB;
  transition: background 0.4s ease;
}
.kpi-card.alert::before { background: #EF4444; }
.kpi-card.warn::before { background: #F59E0B; }
.kpi-card.good::before { background: #10B981; }
.kpi-icon {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 8px;
  transition: background 0.4s ease;
}
.kpi-icon .material-symbols-outlined { font-size: 20px; transition: color 0.4s ease; }
.kpi-icon.default { background: #F3F4F6; }
.kpi-icon.default .material-symbols-outlined { color: #6B7280; }
.kpi-icon.red { background: #FEE2E2; }
.kpi-icon.red .material-symbols-outlined { color: #EF4444; }
.kpi-icon.green { background: #D1FAE5; }
.kpi-icon.green .material-symbols-outlined { color: #10B981; }
.kpi-icon.amber { background: #FEF3C7; }
.kpi-icon.amber .material-symbols-outlined { color: #F59E0B; }
.kpi-icon.blue { background: #DBEAFE; }
.kpi-icon.blue .material-symbols-outlined { color: #2563EB; }
.kpi-value {
  font-size: 24px;
  font-weight: 800;
  line-height: 1;
  margin-bottom: 4px;
  transition: color 0.4s ease;
  font-variant-numeric: tabular-nums;
}
.kpi-label {
  font-size: 11px;
  font-weight: 600;
  color: #9CA3AF;
}

/* ===== TIER 2: COUNTERS + QUEUE ===== */
.tier-2 {
  display: flex;
  gap: 20px;
  margin-bottom: 20px;
  align-items: flex-start;
}

/* Counter Grid */
.counter-section {
  width: 40%;
  flex-shrink: 0;
}
.section-card {
  background: white;
  border-radius: 12px;
  border: 1px solid #E5E7EB;
  padding: 20px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}
.section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 16px;
}
.section-header .material-symbols-outlined {
  font-size: 20px;
  color: #6B7280;
}
.section-header h3 {
  font-size: 15px;
  font-weight: 700;
  color: #1A1A1A;
}
.section-header .badge {
  margin-left: auto;
  font-size: 11px;
  font-weight: 700;
  padding: 2px 10px;
  border-radius: 12px;
}
.badge-green { background: #D1FAE5; color: #059669; }
.badge-amber { background: #FEF3C7; color: #D97706; }
.badge-red { background: #FEE2E2; color: #DC2626; }
.badge-gray { background: #F3F4F6; color: #6B7280; }

.counter-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
.counter-card {
  border-radius: 10px;
  border: 1px solid #E5E7EB;
  padding: 14px;
  transition: all 0.4s ease;
  position: relative;
  overflow: hidden;
}
.counter-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  width: 4px;
  transition: background 0.4s ease;
}
.counter-card.active { background: #F0FDF4; border-color: #BBF7D0; }
.counter-card.active::before { background: #10B981; }
.counter-card.closed { background: #F9FAFB; border-color: #E5E7EB; }
.counter-card.closed::before { background: #D1D5DB; }
.counter-card.on-break { background: #FFFBEB; border-color: #FDE68A; }
.counter-card.on-break::before { background: #F59E0B; }
.counter-card.break-pending { background: #FFF7ED; border-color: #FDBA74; }
.counter-card.break-pending::before { background: #F97316; }

.counter-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 4px;
}
.counter-name {
  font-size: 14px;
  font-weight: 800;
  color: #1A1A1A;
}
.counter-status {
  font-size: 10px;
  font-weight: 700;
  padding: 2px 8px;
  border-radius: 10px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}
.counter-status.active-status { background: #D1FAE5; color: #059669; }
.counter-status.closed-status { background: #F3F4F6; color: #9CA3AF; }
.counter-status.break-status { background: #FEF3C7; color: #D97706; }
.counter-status.break-pending-status { background: #FFEDD5; color: #EA580C; }

.counter-teller {
  font-size: 12px;
  color: #6B7280;
  margin-bottom: 10px;
}
.counter-break-badge {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  font-size: 10px;
  font-weight: 600;
  color: #EA580C;
  background: #FFEDD5;
  padding: 1px 6px;
  border-radius: 6px;
  margin-left: 6px;
}
.counter-break-badge .material-symbols-outlined { font-size: 12px; }
.counter-detail {
  display: flex;
  align-items: center;
  gap: 8px;
}
.counter-ticket {
  font-size: 18px;
  font-weight: 800;
  color: #1A1A1A;
}
.counter-service-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}
.counter-service-label {
  font-size: 11px;
  font-weight: 500;
  color: #6B7280;
  flex: 1;
}
.counter-elapsed {
  font-size: 12px;
  font-weight: 700;
  color: #374151;
  font-variant-numeric: tabular-nums;
}
.counter-empty {
  display: flex;
  align-items: center;
  gap: 6px;
  color: #9CA3AF;
  font-size: 13px;
}
.counter-empty .material-symbols-outlined { font-size: 18px; }

/* Queue Table */
.queue-section {
  flex: 1;
}
.queue-table-wrap {
  max-height: 340px;
  overflow-y: auto;
  border-radius: 0 0 8px 8px;
}
.queue-table-wrap::-webkit-scrollbar { width: 6px; }
.queue-table-wrap::-webkit-scrollbar-track { background: #F3F4F6; border-radius: 3px; }
.queue-table-wrap::-webkit-scrollbar-thumb { background: #D1D5DB; border-radius: 3px; }
.queue-table-wrap::-webkit-scrollbar-thumb:hover { background: #9CA3AF; }

table.queue-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}
table.queue-table thead {
  position: sticky;
  top: 0;
  z-index: 1;
}
table.queue-table th {
  background: #F9FAFB;
  padding: 10px 12px;
  text-align: left;
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #6B7280;
  border-bottom: 1px solid #E5E7EB;
}
table.queue-table td {
  padding: 10px 12px;
  border-bottom: 1px solid #F3F4F6;
  vertical-align: middle;
}
table.queue-table tr { transition: background 0.2s ease; }
table.queue-table tbody tr:nth-child(even) { background: #FAFAFA; }
table.queue-table tbody tr:hover { background: #F0F4FF; }
table.queue-table tbody tr.sla-breach { background: #FEF2F2; }
table.queue-table tbody tr.sla-breach:hover { background: #FEE2E2; }

.service-cell {
  display: flex;
  align-items: center;
  gap: 6px;
}
.service-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}
.wait-text { font-weight: 600; transition: color 0.3s ease; }
.wait-text.critical { color: #EF4444; font-weight: 700; }
.wait-text.warning { color: #F59E0B; }

.sla-icon {
  display: flex;
  align-items: center;
  gap: 4px;
}
.sla-icon .material-symbols-outlined { font-size: 18px; }
.sla-icon.ok .material-symbols-outlined { color: #10B981; }
.sla-icon.breached .material-symbols-outlined { color: #EF4444; }

.queue-empty {
  text-align: center;
  padding: 40px 20px;
  color: #9CA3AF;
}
.queue-empty .material-symbols-outlined { font-size: 40px; display: block; margin-bottom: 8px; }

/* ===== TIER 3: AI RECOMMENDATIONS + FORECAST ===== */
.tier-3 {
  display: flex;
  gap: 20px;
  align-items: flex-start;
}

/* AI Recommendations */
.reco-section {
  width: 55%;
  flex-shrink: 0;
}
.ai-badge {
  font-size: 10px;
  font-weight: 700;
  padding: 3px 10px;
  border-radius: 12px;
  background: linear-gradient(135deg, #EDE9FE, #DBEAFE);
  color: #6D28D9;
  display: inline-flex;
  align-items: center;
  gap: 4px;
}
.reco-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.reco-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px;
  border-radius: 10px;
  border: 1px solid #E5E7EB;
  background: white;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}
.reco-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  width: 4px;
}
.reco-card.critical::before { background: #EF4444; }
.reco-card.warning::before { background: #F59E0B; }
.reco-card.success::before { background: #10B981; }
.reco-card.info::before { background: #3B82F6; }

.reco-icon-circle {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.reco-icon-circle .material-symbols-outlined { font-size: 18px; color: #fff; }
.reco-icon-circle.critical { background: #EF4444; }
.reco-icon-circle.warning { background: #F59E0B; }
.reco-icon-circle.success { background: #10B981; }
.reco-icon-circle.info { background: #3B82F6; }

.reco-text {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: #374151;
  line-height: 1.4;
}
.reco-execute {
  padding: 6px 16px;
  border-radius: 6px;
  background: #E9041E;
  color: #fff;
  font-family: 'Inter', sans-serif;
  font-size: 12px;
  font-weight: 700;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
  flex-shrink: 0;
}
.reco-execute:hover { background: #C50318; transform: translateY(-1px); }
.reco-execute.executed {
  background: #10B981;
  pointer-events: none;
}

/* Forecast Chart */
.forecast-section {
  flex: 1;
}
.forecast-badge {
  font-size: 10px;
  font-weight: 700;
  padding: 3px 10px;
  border-radius: 12px;
  background: #DBEAFE;
  color: #2563EB;
}
.forecast-chart-wrap {
  padding: 10px 0;
}

/* ===== FOOTER ===== */
.footer {
  text-align: center;
  padding: 24px 32px;
  color: #9CA3AF;
  font-size: 12px;
  border-top: 1px solid #E5E7EB;
  margin-top: 32px;
}
.footer strong { color: #E9041E; }

/* ===== SMOOTH TRANSITIONS ===== */
.fade-in {
  animation: fadeIn 0.4s ease forwards;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
</head>
<body>

<!-- ===== TIME-STEP NAVIGATION BAR ===== -->
<div class="nav-bar">
  <div class="nav-brand">Bl&eacute;<span>Saf</span></div>
  <div class="nav-sep"></div>
  <div class="nav-title">Tableau de Bord Directeur d'Agence</div>
  <div class="nav-buttons" id="navButtons">
    <button class="nav-btn active" data-step="0">14:00</button>
    <button class="nav-btn" data-step="1">14:10</button>
    <button class="nav-btn" data-step="2">14:15</button>
    <button class="nav-btn" data-step="3">14:30</button>
    <button class="nav-btn" data-step="4">14:45</button>
    <button class="nav-btn" data-step="5">15:00</button>
  </div>
  <div class="nav-label" id="navLabel">D&eacute;marrage de la d&eacute;mo</div>
  <div class="nav-hint">&#8592; &#8594; / 1-6</div>
  <div class="demo-badge">DEMO</div>
</div>

<!-- ===== ALERT BANNER ===== -->
<div class="alert-banner" id="alertBanner">
  <span class="material-symbols-outlined" id="alertIcon">warning</span>
  <span class="alert-text" id="alertText"></span>
  <button class="alert-dismiss" id="alertDismiss">&times;</button>
</div>

<!-- ===== PAGE ===== -->
<div class="page">

  <!-- Page Header with SG Red left accent -->
  <div class="page-header">
    <div class="page-header-left">
      <div class="page-header-accent"></div>
      <div class="page-header-text">
        <h2>Tableau de Bord &mdash; Agence Lac 2</h2>
        <div class="subtitle">Directeur d'Agence</div>
      </div>
    </div>
    <div class="page-header-right">
      <span class="branch-badge" id="dateLabel">26 Octobre 2024</span>
      <div class="live-dot"></div>
      <span>Temps r&eacute;el</span>
      <span id="clockDisplay" style="font-weight:700;color:#1A1A1A;">14:00</span>
    </div>
  </div>

  <!-- ===== TIER 1: Health Gauge + KPI Strip ===== -->
  <div class="tier-1">
    <!-- Health Score Gauge -->
    <div class="gauge-card green" id="gaugeCard">
      <div class="gauge-title">Score de Sant&eacute;</div>
      <div class="gauge-svg-wrap">
        <svg viewBox="0 0 200 120" id="gaugeSvg">
          <!-- Background arc -->
          <path d="M 20,100 A 80,80 0 0,1 180,100" fill="none" stroke="#E5E7EB" stroke-width="20" stroke-linecap="round"/>
          <!-- Zone arcs (subtle coloring) -->
          <path id="gaugeRedZone" d="M 20,100 A 80,80 0 0,1 180,100" fill="none" stroke="#FEE2E2" stroke-width="20" stroke-linecap="round"
                stroke-dasharray="150.8 100.5" stroke-dashoffset="0" opacity="0.4"/>
          <path id="gaugeAmberZone" d="M 20,100 A 80,80 0 0,1 180,100" fill="none" stroke="#FEF3C7" stroke-width="20" stroke-linecap="round"
                stroke-dasharray="50.3 200.9" stroke-dashoffset="-150.8" opacity="0.4"/>
          <path id="gaugeGreenZone" d="M 20,100 A 80,80 0 0,1 180,100" fill="none" stroke="#D1FAE5" stroke-width="20" stroke-linecap="round"
                stroke-dasharray="50.3 200.9" stroke-dashoffset="-201.1" opacity="0.4"/>
          <!-- Active value arc -->
          <path id="gaugeValueArc" d="M 20,100 A 80,80 0 0,1 180,100" fill="none" stroke="#10B981" stroke-width="20" stroke-linecap="round"
                stroke-dasharray="238.8 12.6" stroke-dashoffset="0"
                style="transition: stroke-dasharray 0.8s ease, stroke 0.6s ease;"/>
        </svg>
        <div class="gauge-score" id="gaugeScoreText" style="color:#10B981;">95</div>
        <div class="gauge-sublabel">Score de Sant&eacute;</div>
      </div>
      <div class="gauge-status" id="gaugeStatusText" style="color:#10B981;">Excellent</div>
    </div>

    <!-- KPI Strip — 6 cards -->
    <div class="kpi-strip" id="kpiStrip">
      <!-- 1. En attente -->
      <div class="kpi-card good" id="kpiQueue">
        <div class="kpi-icon green">
          <span class="material-symbols-outlined">groups</span>
        </div>
        <div class="kpi-value" id="kpiQueueVal" style="color:#1A1A1A;">3</div>
        <div class="kpi-label">En attente</div>
      </div>
      <!-- 2. Temps moyen -->
      <div class="kpi-card" id="kpiWait">
        <div class="kpi-icon default">
          <span class="material-symbols-outlined">schedule</span>
        </div>
        <div class="kpi-value" id="kpiWaitVal" style="color:#1A1A1A;">0 min</div>
        <div class="kpi-label">Temps moyen</div>
      </div>
      <!-- 3. SLA -->
      <div class="kpi-card good" id="kpiSla">
        <div class="kpi-icon green">
          <span class="material-symbols-outlined">verified</span>
        </div>
        <div class="kpi-value" id="kpiSlaVal" style="color:#10B981;">100%</div>
        <div class="kpi-label">SLA</div>
      </div>
      <!-- 4. Servis -->
      <div class="kpi-card" id="kpiServed">
        <div class="kpi-icon blue">
          <span class="material-symbols-outlined">check_circle</span>
        </div>
        <div class="kpi-value" id="kpiServedVal" style="color:#1A1A1A;">0</div>
        <div class="kpi-label">Servis</div>
      </div>
      <!-- 5. Capacit&eacute; -->
      <div class="kpi-card" id="kpiCounters">
        <div class="kpi-icon default">
          <span class="material-symbols-outlined">desktop_windows</span>
        </div>
        <div class="kpi-value" id="kpiCountersVal" style="color:#1A1A1A;">2/4</div>
        <div class="kpi-label">Capacit&eacute;</div>
      </div>
      <!-- 6. V&eacute;locit&eacute; -->
      <div class="kpi-card" id="kpiVelocity">
        <div class="kpi-icon default">
          <span class="material-symbols-outlined">speed</span>
        </div>
        <div class="kpi-value" id="kpiVelocityVal" style="color:#1A1A1A;">+20/h</div>
        <div class="kpi-label">V&eacute;locit&eacute;</div>
      </div>
    </div>
  </div>

  <!-- ===== TIER 2: Counter Grid + Queue Table ===== -->
  <div class="tier-2">
    <!-- Counter Status Grid -->
    <div class="counter-section">
      <div class="section-card">
        <div class="section-header">
          <span class="material-symbols-outlined">desktop_windows</span>
          <h3>&Eacute;tat des Guichets</h3>
          <span class="badge badge-green" id="counterBadge">2/4 actifs</span>
        </div>
        <div class="counter-grid" id="counterGrid">
          <!-- Populated by JS -->
        </div>
      </div>
    </div>

    <!-- Queue Table -->
    <div class="queue-section">
      <div class="section-card">
        <div class="section-header">
          <span class="material-symbols-outlined">list_alt</span>
          <h3>File d'attente</h3>
          <span class="badge badge-green" id="queueBadge">3 clients</span>
        </div>
        <div class="queue-table-wrap" id="queueTableWrap">
          <table class="queue-table">
            <thead>
              <tr>
                <th style="width:36px;">#</th>
                <th>Ticket</th>
                <th>Client</th>
                <th>Service</th>
                <th>Attente</th>
                <th>SLA</th>
              </tr>
            </thead>
            <tbody id="queueBody">
              <!-- Populated by JS -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== TIER 3: AI Recommendations + Forecast ===== -->
  <div class="tier-3">
    <!-- AI Recommendations Panel -->
    <div class="reco-section">
      <div class="section-card">
        <div class="section-header">
          <span class="material-symbols-outlined" style="color:#6D28D9;">auto_awesome</span>
          <h3>Recommandations IA</h3>
          <span class="ai-badge">
            <span class="material-symbols-outlined" style="font-size:12px;">auto_awesome</span>
            Propuls&eacute; par l'IA
          </span>
        </div>
        <div class="reco-list" id="recoList">
          <!-- Populated by JS -->
        </div>
      </div>
    </div>

    <!-- Forecast Mini-Chart -->
    <div class="forecast-section">
      <div class="section-card">
        <div class="section-header">
          <span class="material-symbols-outlined">trending_up</span>
          <h3>Pr&eacute;vision de Demande</h3>
          <span class="forecast-badge" id="forecastBadge">87% pr&eacute;cision</span>
        </div>
        <div class="forecast-chart-wrap">
          <svg id="forecastChart" viewBox="0 0 440 220" style="width:100%;height:220px;"></svg>
        </div>
      </div>
    </div>
  </div>

</div>

<!-- ===== FOOTER ===== -->
<div class="footer">
  <strong>Bl&eacute;Saf</strong> &mdash; Tableau de Bord Directeur d'Agence &middot; D&eacute;mo Interactive
</div>

<!-- ===== DATA MODULE ===== -->
<script src="demo-data.js"></script>

<!-- ===== APPLICATION LOGIC ===== -->
<script>
(function() {
  'use strict';

  var currentStep = 0;
  var totalSteps = 6;
  var alertDismissed = false;
  var previousStep = -1;

  // ─── DOM REFS ──────────────────────────────
  var navBtns = document.querySelectorAll('.nav-btn[data-step]');
  var navLabel = document.getElementById('navLabel');
  var alertBanner = document.getElementById('alertBanner');
  var alertIcon = document.getElementById('alertIcon');
  var alertText = document.getElementById('alertText');
  var alertDismissBtn = document.getElementById('alertDismiss');
  var clockDisplay = document.getElementById('clockDisplay');

  // Gauge
  var gaugeCard = document.getElementById('gaugeCard');
  var gaugeValueArc = document.getElementById('gaugeValueArc');
  var gaugeScoreText = document.getElementById('gaugeScoreText');
  var gaugeStatusText = document.getElementById('gaugeStatusText');

  // KPIs
  var kpiQueueVal = document.getElementById('kpiQueueVal');
  var kpiWaitVal = document.getElementById('kpiWaitVal');
  var kpiSlaVal = document.getElementById('kpiSlaVal');
  var kpiServedVal = document.getElementById('kpiServedVal');
  var kpiCountersVal = document.getElementById('kpiCountersVal');
  var kpiVelocityVal = document.getElementById('kpiVelocityVal');
  var kpiQueue = document.getElementById('kpiQueue');
  var kpiWait = document.getElementById('kpiWait');
  var kpiSla = document.getElementById('kpiSla');
  var kpiServed = document.getElementById('kpiServed');
  var kpiCounters = document.getElementById('kpiCounters');
  var kpiVelocity = document.getElementById('kpiVelocity');

  // Counters, Queue, Reco
  var counterGrid = document.getElementById('counterGrid');
  var counterBadge = document.getElementById('counterBadge');
  var queueBadge = document.getElementById('queueBadge');
  var queueBody = document.getElementById('queueBody');
  var recoList = document.getElementById('recoList');

  // ─── HELPERS ───────────────────────────────
  function getHealthColor(score) {
    if (score >= 80) return '#10B981';
    if (score >= 60) return '#F59E0B';
    return '#EF4444';
  }

  function getGaugeClass(score) {
    if (score >= 80) return 'green';
    if (score >= 60) return 'amber';
    return 'red';
  }

  // ─── GAUGE UPDATE ──────────────────────────
  // Arc from M 20,100 A 80,80 0 0,1 180,100 => semicircle, arc length = pi * 80 = 251.3
  var TOTAL_ARC = 251.3;

  function updateGauge(score, label) {
    var color = getHealthColor(score);
    var cls = getGaugeClass(score);

    // Update card class
    gaugeCard.className = 'gauge-card ' + cls;

    // Arc: stroke-dasharray = filled, remainder
    var filled = (score / 100) * TOTAL_ARC;
    var remainder = TOTAL_ARC - filled;
    gaugeValueArc.setAttribute('stroke-dasharray', filled.toFixed(1) + ' ' + remainder.toFixed(1));
    gaugeValueArc.setAttribute('stroke', color);

    // Score text
    gaugeScoreText.textContent = score;
    gaugeScoreText.style.color = color;

    // Status label
    gaugeStatusText.textContent = label;
    gaugeStatusText.style.color = color;
  }

  // ─── KPI UPDATES ──────────────────────────
  function setKpiState(card, borderClass, iconClass) {
    card.className = 'kpi-card' + (borderClass ? ' ' + borderClass : '');
    var iconWrap = card.querySelector('.kpi-icon');
    iconWrap.className = 'kpi-icon ' + iconClass;
  }

  function updateKpis(stats) {
    // 1. En attente
    kpiQueueVal.textContent = stats.queue;
    if (stats.queue >= 15) {
      kpiQueueVal.style.color = '#EF4444';
      setKpiState(kpiQueue, 'alert', 'red');
    } else if (stats.queue >= 8) {
      kpiQueueVal.style.color = '#F59E0B';
      setKpiState(kpiQueue, 'warn', 'amber');
    } else {
      kpiQueueVal.style.color = '#1A1A1A';
      setKpiState(kpiQueue, 'good', 'green');
    }

    // 2. Temps moyen
    kpiWaitVal.textContent = stats.avgWait + ' min';
    if (stats.avgWait >= 12) {
      kpiWaitVal.style.color = '#EF4444';
      setKpiState(kpiWait, 'alert', 'red');
    } else if (stats.avgWait >= 7) {
      kpiWaitVal.style.color = '#F59E0B';
      setKpiState(kpiWait, 'warn', 'amber');
    } else {
      kpiWaitVal.style.color = '#1A1A1A';
      setKpiState(kpiWait, '', 'default');
    }

    // 3. SLA
    kpiSlaVal.textContent = stats.sla + '%';
    if (stats.sla < 75) {
      kpiSlaVal.style.color = '#EF4444';
      setKpiState(kpiSla, 'alert', 'red');
    } else if (stats.sla < 90) {
      kpiSlaVal.style.color = '#F59E0B';
      setKpiState(kpiSla, 'warn', 'amber');
    } else {
      kpiSlaVal.style.color = '#10B981';
      setKpiState(kpiSla, 'good', 'green');
    }

    // 4. Servis
    kpiServedVal.textContent = stats.totalServed;

    // 5. Capacit&eacute;
    kpiCountersVal.textContent = stats.activeCounters + '/4 guichets';

    // 6. V&eacute;locit&eacute;
    var velSign = stats.velocity >= 0 ? '+' : '';
    var velText = velSign + stats.velocity + '/h';
    kpiVelocityVal.textContent = velText;
    if (stats.velocity > 50) {
      kpiVelocityVal.style.color = '#EF4444';
      setKpiState(kpiVelocity, 'alert', 'red');
    } else if (stats.velocity > 20) {
      kpiVelocityVal.style.color = '#F59E0B';
      setKpiState(kpiVelocity, 'warn', 'amber');
    } else {
      kpiVelocityVal.style.color = '#1A1A1A';
      setKpiState(kpiVelocity, '', 'default');
    }
  }

  // ─── COUNTER GRID ─────────────────────────
  function updateCounters(counters) {
    var activeCount = counters.filter(function(c) { return c.status === 'busy'; }).length;
    var totalCount = counters.length;
    counterBadge.textContent = activeCount + '/' + totalCount + ' actifs';
    if (activeCount <= 1) {
      counterBadge.className = 'badge badge-red';
    } else if (activeCount <= 2) {
      counterBadge.className = 'badge badge-amber';
    } else {
      counterBadge.className = 'badge badge-green';
    }

    var html = '';
    counters.forEach(function(c) {
      var teller = DEMO_DATA.tellers[c.id];
      var tellerName = teller ? teller.name : c.id;

      var cardClass = 'counter-card ';
      var statusClass = '';
      var statusText = '';

      if (c.status === 'busy') {
        cardClass += c.breakPending ? 'break-pending' : 'active';
        statusClass = c.breakPending ? 'break-pending-status' : 'active-status';
        statusText = 'En service';
      } else if (c.status === 'break') {
        cardClass += 'on-break';
        statusClass = 'break-status';
        statusText = 'En pause';
      } else {
        cardClass += 'closed';
        statusClass = 'closed-status';
        statusText = 'Ferm\u00e9';
      }

      html += '<div class="' + cardClass + '">';
      html += '<div class="counter-header">';
      html += '<span class="counter-name">Guichet ' + c.id.replace('G', '') + '</span>';
      html += '<span class="counter-status ' + statusClass + '">' + statusText + '</span>';
      html += '</div>';
      html += '<div class="counter-teller">' + tellerName;
      if (c.breakPending) {
        html += '<span class="counter-break-badge"><span class="material-symbols-outlined">coffee</span>Pause pr\u00e9vue</span>';
      }
      html += '</div>';

      if (c.status === 'busy' && c.ticket) {
        var svc = DEMO_DATA.getService(c.service);
        html += '<div class="counter-detail">';
        html += '<span class="counter-ticket">' + c.ticket + '</span>';
        html += '<span class="counter-service-dot" style="background:' + svc.color + '"></span>';
        html += '<span class="counter-service-label">' + svc.shortLabel + '</span>';
        html += '<span class="counter-elapsed">' + c.elapsed + ' min</span>';
        html += '</div>';
      } else if (c.status === 'break') {
        html += '<div class="counter-empty">';
        html += '<span class="material-symbols-outlined">coffee</span>';
        html += '<span>En pause</span>';
        html += '</div>';
      } else if (c.status === 'closed') {
        html += '<div class="counter-empty">';
        html += '<span class="material-symbols-outlined">lock</span>';
        html += '<span>Ferm\u00e9</span>';
        html += '</div>';
      }

      html += '</div>';
    });
    counterGrid.innerHTML = html;
  }

  // ─── QUEUE TABLE ──────────────────────────
  function updateQueueTable(waiting) {
    var count = waiting.length;
    var breaches = waiting.filter(function(w) { return w.slaBreached; }).length;

    if (breaches > 0) {
      queueBadge.className = 'badge badge-red';
      queueBadge.textContent = count + ' clients (' + breaches + ' SLA)';
    } else if (count > 10) {
      queueBadge.className = 'badge badge-amber';
      queueBadge.textContent = count + ' clients';
    } else {
      queueBadge.className = 'badge badge-green';
      queueBadge.textContent = count + ' client' + (count !== 1 ? 's' : '');
    }

    if (count === 0) {
      queueBody.innerHTML = '<tr><td colspan="6" class="queue-empty">' +
        '<span class="material-symbols-outlined">celebration</span>' +
        'Aucun client en attente</td></tr>';
      return;
    }

    var html = '';
    waiting.forEach(function(w) {
      var svc = DEMO_DATA.getService(w.service);
      var trClass = w.slaBreached ? ' class="sla-breach"' : '';
      var waitClass = '';
      if (w.slaBreached || w.waitMin > 15) waitClass = 'critical';
      else if (w.waitMin >= 10) waitClass = 'warning';

      html += '<tr' + trClass + '>';
      html += '<td style="font-weight:600;color:#9CA3AF;">' + w.pos + '</td>';
      html += '<td style="font-weight:700;">' + w.ticket + '</td>';
      html += '<td>' + w.name + '</td>';
      html += '<td><div class="service-cell"><span class="service-dot" style="background:' + svc.color + '"></span>' + svc.shortLabel + '</div></td>';
      html += '<td><span class="wait-text ' + waitClass + '">' + w.waitMin + ' min</span></td>';
      html += '<td>';
      if (w.slaBreached) {
        html += '<div class="sla-icon breached"><span class="material-symbols-outlined">warning</span></div>';
      } else {
        html += '<div class="sla-icon ok"><span class="material-symbols-outlined">check_circle</span></div>';
      }
      html += '</td>';
      html += '</tr>';
    });
    queueBody.innerHTML = html;
  }

  // ─── RECOMMENDATIONS ──────────────────────
  function updateRecommendations(recs) {
    var html = '';
    recs.forEach(function(rec, i) {
      html += '<div class="reco-card ' + rec.priority + '">';
      html += '<div class="reco-icon-circle ' + rec.priority + '">';
      html += '<span class="material-symbols-outlined">' + rec.icon + '</span>';
      html += '</div>';
      html += '<div class="reco-text">' + rec.text + '</div>';
      if (rec.action) {
        html += '<button class="reco-execute" data-action="' + rec.action + '" onclick="handleExecute(this)">Ex\u00e9cuter</button>';
      }
      html += '</div>';
    });
    recoList.innerHTML = html;
  }

  // ─── FORECAST CHART ───────────────────────
  function drawForecastChart(currentTime) {
    var svg = document.getElementById('forecastChart');
    var points = DEMO_DATA.forecast.points;
    var padLeft = 45;
    var padRight = 15;
    var padTop = 20;
    var padBottom = 30;
    var w = 440 - padLeft - padRight;
    var h = 220 - padTop - padBottom;

    // Find max value for Y scale
    var maxVal = 0;
    points.forEach(function(p) {
      if (p.upper > maxVal) maxVal = p.upper;
    });
    maxVal = Math.ceil(maxVal / 5) * 5 + 2;

    function xPos(i) { return padLeft + (i / (points.length - 1)) * w; }
    function yPos(v) { return padTop + h - (v / maxVal) * h; }

    var html = '';

    // Grid lines
    for (var g = 0; g <= 4; g++) {
      var gv = (maxVal / 4) * g;
      var gy = yPos(gv);
      html += '<line x1="' + padLeft + '" y1="' + gy + '" x2="' + (padLeft + w) + '" y2="' + gy + '" stroke="#F3F4F6" stroke-width="1"/>';
      html += '<text x="' + (padLeft - 6) + '" y="' + (gy + 4) + '" text-anchor="end" fill="#9CA3AF" font-size="10" font-family="Inter">' + Math.round(gv) + '</text>';
    }

    // X-axis labels
    points.forEach(function(p, i) {
      var px = xPos(i);
      html += '<text x="' + px + '" y="' + (padTop + h + 18) + '" text-anchor="middle" fill="#9CA3AF" font-size="10" font-family="Inter">' + p.time + '</text>';
    });

    // Confidence interval (filled area between upper and lower bounds)
    var areaPath = 'M';
    points.forEach(function(p, i) {
      areaPath += (i === 0 ? '' : ' L') + xPos(i).toFixed(1) + ' ' + yPos(p.upper).toFixed(1);
    });
    for (var j = points.length - 1; j >= 0; j--) {
      areaPath += ' L' + xPos(j).toFixed(1) + ' ' + yPos(points[j].lower).toFixed(1);
    }
    areaPath += ' Z';
    html += '<path d="' + areaPath + '" fill="#DBEAFE" opacity="0.5"/>';

    // Upper bound line (dashed, light blue)
    var upperLine = 'M';
    points.forEach(function(p, i) {
      upperLine += (i === 0 ? '' : ' L') + xPos(i).toFixed(1) + ' ' + yPos(p.upper).toFixed(1);
    });
    html += '<path d="' + upperLine + '" fill="none" stroke="#93C5FD" stroke-width="1" stroke-dasharray="4 3"/>';

    // Lower bound line (dashed, light blue)
    var lowerLine = 'M';
    points.forEach(function(p, i) {
      lowerLine += (i === 0 ? '' : ' L') + xPos(i).toFixed(1) + ' ' + yPos(p.lower).toFixed(1);
    });
    html += '<path d="' + lowerLine + '" fill="none" stroke="#93C5FD" stroke-width="1" stroke-dasharray="4 3"/>';

    // Predicted line (dark blue, solid)
    var predLine = 'M';
    points.forEach(function(p, i) {
      predLine += (i === 0 ? '' : ' L') + xPos(i).toFixed(1) + ' ' + yPos(p.predicted).toFixed(1);
    });
    html += '<path d="' + predLine + '" fill="none" stroke="#2563EB" stroke-width="2.5" stroke-linejoin="round"/>';

    // Data points on predicted line
    points.forEach(function(p, i) {
      html += '<circle cx="' + xPos(i).toFixed(1) + '" cy="' + yPos(p.predicted).toFixed(1) + '" r="3.5" fill="#2563EB" stroke="#fff" stroke-width="1.5"/>';
    });

    // Current time marker (vertical dashed red line)
    var currentTimeIdx = -1;
    points.forEach(function(p, i) {
      if (p.time === currentTime) currentTimeIdx = i;
    });
    if (currentTimeIdx >= 0) {
      var cx = xPos(currentTimeIdx);
      html += '<line x1="' + cx.toFixed(1) + '" y1="' + padTop + '" x2="' + cx.toFixed(1) + '" y2="' + (padTop + h) + '" stroke="#E9041E" stroke-width="1.5" stroke-dasharray="5 3"/>';
      html += '<circle cx="' + cx.toFixed(1) + '" cy="' + yPos(points[currentTimeIdx].predicted).toFixed(1) + '" r="5" fill="#E9041E" stroke="#fff" stroke-width="2"/>';
      // Label pill
      html += '<rect x="' + (cx - 22).toFixed(1) + '" y="' + (padTop - 4) + '" width="44" height="16" rx="4" fill="#E9041E"/>';
      html += '<text x="' + cx.toFixed(1) + '" y="' + (padTop + 8) + '" text-anchor="middle" fill="#fff" font-size="9" font-weight="700" font-family="Inter">' + currentTime + '</text>';
    }

    // Annotations
    DEMO_DATA.forecast.annotations.forEach(function(ann) {
      var aIdx = -1;
      points.forEach(function(p, i) { if (p.time === ann.time) aIdx = i; });
      if (aIdx >= 0) {
        var ax = xPos(aIdx);
        var ay = yPos(points[aIdx].predicted) - 18;
        var lines = ann.text.split('\n');
        lines.forEach(function(line, li) {
          html += '<text x="' + ax.toFixed(1) + '" y="' + (ay - (lines.length - 1 - li) * 12) + '" text-anchor="middle" fill="#6B7280" font-size="8" font-family="Inter" font-weight="600">' + line + '</text>';
        });
      }
    });

    // Y-axis label
    html += '<text x="12" y="' + (padTop + h / 2) + '" text-anchor="middle" fill="#9CA3AF" font-size="9" font-family="Inter" font-weight="600" transform="rotate(-90 12 ' + (padTop + h / 2) + ')">Clients</text>';

    svg.innerHTML = html;
  }

  // ─── ALERT BANNER ─────────────────────────
  function updateAlert(snapshot, isDramatic) {
    alertDismissed = false;

    if (!snapshot.announcement) {
      alertBanner.classList.remove('visible', 'critical', 'success', 'warning', 'flash');
      return;
    }

    // Determine type based on health score
    var type = 'warning';
    if (snapshot.healthScore < 60) {
      type = 'critical';
    } else if (snapshot.healthScore >= 80) {
      type = 'success';
    }
    // Special case: snapshot 3 is a success (G3 activated)
    if (snapshot.id === 3) type = 'success';

    alertBanner.className = 'alert-banner ' + type;
    alertText.textContent = snapshot.announcement;

    if (type === 'critical') {
      alertIcon.textContent = 'error';
    } else if (type === 'success') {
      alertIcon.textContent = 'check_circle';
    } else {
      alertIcon.textContent = 'info';
    }

    // Trigger animation
    requestAnimationFrame(function() {
      alertBanner.classList.add('visible');
      // Dramatic flash when transitioning to snapshot 2 (14:15 crisis)
      if (isDramatic) {
        alertBanner.classList.add('flash');
        setTimeout(function() {
          alertBanner.classList.remove('flash');
        }, 1300);
      }
    });
  }

  // ─── MAIN RENDER ──────────────────────────
  function render(step) {
    var snapshot = DEMO_DATA.snapshots[step];
    var isDramatic = (step === 2 && previousStep === 1);

    // Nav buttons
    navBtns.forEach(function(btn) {
      btn.classList.toggle('active', parseInt(btn.getAttribute('data-step')) === step);
    });
    navLabel.textContent = snapshot.label;
    clockDisplay.textContent = snapshot.time;

    // Alert
    updateAlert(snapshot, isDramatic);

    // Gauge
    updateGauge(snapshot.healthScore, snapshot.healthLabel);

    // KPIs
    updateKpis(snapshot.stats);

    // Counters
    updateCounters(snapshot.counters);

    // Queue
    updateQueueTable(snapshot.waiting);

    // Recommendations
    updateRecommendations(snapshot.recommendations);

    // Forecast
    drawForecastChart(snapshot.time);

    previousStep = step;
  }

  // ─── NAVIGATION ───────────────────────────
  function goToStep(step) {
    if (step < 0 || step >= totalSteps) return;
    currentStep = step;
    render(currentStep);
  }

  // Click handlers for snapshot buttons
  navBtns.forEach(function(btn) {
    btn.addEventListener('click', function() {
      goToStep(parseInt(btn.getAttribute('data-step')));
    });
  });

  // Keyboard navigation: arrow keys and number keys 1-6
  document.addEventListener('keydown', function(e) {
    if (e.key === 'ArrowRight' || e.key === 'Right') {
      e.preventDefault();
      goToStep(currentStep + 1);
    } else if (e.key === 'ArrowLeft' || e.key === 'Left') {
      e.preventDefault();
      goToStep(currentStep - 1);
    } else if (e.key >= '1' && e.key <= '6') {
      e.preventDefault();
      goToStep(parseInt(e.key) - 1);
    }
  });

  // Alert dismiss
  alertDismissBtn.addEventListener('click', function() {
    alertDismissed = true;
    alertBanner.classList.remove('visible');
  });

  // ─── EXECUTE BUTTON HANDLER ───────────────
  window.handleExecute = function(btn) {
    btn.innerHTML = '\u2713 Ex\u00e9cut\u00e9';
    btn.classList.add('executed');
    // Brief green flash on the card
    var card = btn.closest('.reco-card');
    card.style.background = '#F0FDF4';
    card.style.borderColor = '#BBF7D0';
    setTimeout(function() {
      card.style.background = '';
      card.style.borderColor = '';
    }, 1500);
  };

  // ─── INITIAL RENDER ───────────────────────
  render(0);

})();
</script>

</body>
</html>
